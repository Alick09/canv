(()=>{var e={349:function(e){var t;t=()=>(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{Space:()=>i,installSelection:()=>c});var n=function(e,t,n){var r=n(e),a=r.center,o=r.angle,i=r.rotationCenter,c=r.scale;a&&(t.center=a),o&&(t.angle=o),c&&(t.scale=c),i&&(t.rotationCenter=i)},r=function(e,t){var n=t.center,r=void 0===n?{x:0,y:0}:n,a=t.scale,o=void 0===a?1:a,i=t.angle,c=void 0===i?0:i,s=t.rotationCenter,l=void 0===s?{x:0,y:0}:s;return function(e,t,n){if(0==n)return e;var r={x:e.x-t.x,y:e.y-t.y},a=Math.hypot(r.x,r.y);if(0==a)return e;var o=Math.atan2(r.y,r.x)+n,i=Math.cos(o)*a,c=Math.sin(o)*a;return{x:t.x+i,y:t.y+c}}({x:(e.x-r.x)/o,y:(e.y-r.y)/o},l,-c)},a=function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},a.apply(this,arguments)},o=function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},o.apply(this,arguments)},i=function(e,t){var i=e.getContext("2d");if(null===i)throw TypeError("Can't get context2d from canvas");var c=[],s=function(e){var t=e.center,n=e.angle,r=e.rotationCenter,a=e.scale;t&&i.translate(t.x,t.y),a&&i.scale(a,a),n&&(r&&i.translate(r.x,r.y),i.rotate(n),r&&i.translate(-r.x,-r.y))},l={center:{x:0,y:0},scale:t.scale,angle:t.angle,rotationCenter:Object.assign({x:0,y:0},t.rotationCenter)},u=function(){return o(o({},l),{center:{x:e.width/2-f.x+l.center.x,y:e.height/2-f.y+l.center.y}})},f=t.center||{x:0,y:0},d={canvas:e,objects:c,addObject:function(e){return e.parent=this,c.push(e),e},addDrawable:function(e){return this.addObject(function(e){var t={center:{x:e.x||0,y:e.y||0},angle:e.angle,scale:e.scale,rotationCenter:e.rotationCenter};if(e.selectable&&void 0===e.checkInside)throw TypeError("Drawable should have checkInside method to be selectable");var o={selected:!1};return{parent:void 0,orig:e,position:function(){return a({x:t.center.x,y:t.center.y},t)},draw:function(t){return e.draw.call(this,t)},set:function(e){n(t,t,e)},checkInside:function(t){return!(!e.selectable||!e.checkInside)&&e.checkInside.call(this,this.transform(t))},selected:function(e){return void 0!==e&&(o.selected=e),o.selected},transform:function(e){var n=this.parent?this.parent.transform(e):e;return r(n,t)}}}(e))},draw:function(){i.clearRect(0,0,e.width,e.height),s(u()),c.forEach((function(e){i.save();var t=e.position();s(o({center:t},t)),e.draw(i),i.restore()})),i.resetTransform()},launch:function(){var e=this;if(t.animationTick){var n=this,r=function(){var a;null===(a=t.animationTick)||void 0===a||a.call(n,0),e.draw(),requestAnimationFrame(r)};requestAnimationFrame(r)}else console.warn("Set animationTick in space options to make animation work. Ignoring launch.")},transform:function(e){return r(e,u())},set:function(e){n(l,l,e)}};return function(e,t){var n=t.pixelRatio,r=t.onResize,a=t.setupAutoResize;if(void 0===a||a){if(!r){var o=n||window.devicePixelRatio;r=function(){e.canvas.width=e.canvas.offsetWidth*o,e.canvas.height=e.canvas.offsetHeight*o,e.draw()}}window.onresize=r,r()}}(d,t),d},c=function(e){e.canvas.addEventListener("click",(function(e){t({x:e.offsetX,y:e.offsetY})}));var t=function(t){var n=function(e){var t=e.pos,n=e.filter,r=e.getFirst,a=void 0!==r&&r,o=null;return e.space.objects.forEach((function(e){e.selected(!1),a&&null!=o||n&&!n(e)||!e.checkInside(t)||(o=e)})),o}({space:e,pos:t});console.log(n),null!==n&&n.selected(!0),e.draw()};return{}};return t})(),e.exports=t()}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}(()=>{"use strict";var e=n(349);const t=()=>{const e=[];for(let t=-760;t<=760;t+=80)for(let n=-760;n<=760;n+=80)e.push({x:n,y:t,draw(e){e.beginPath(),e.fillStyle=this.selected()?"#f00":"#000",e.rect(-22.5,-22.5,45,45),e.fill(),e.closePath()},checkInside:({x:e,y:t})=>Math.abs(e)<22.5&&Math.abs(t)<22.5});return e};window.onload=()=>{const n=(0,e.Space)(document.getElementById("canvas"),{scale:.6});t().forEach((e=>n.addDrawable({selectable:!0,angle:Math.random(),scale:Math.random()+.5,...e}))),(0,e.installSelection)(n),n.draw()}})()})();